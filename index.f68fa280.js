const copyReferLinkBtns=document.querySelectorAll(".refer-link");async function populateReferrerLinkinHTML(e){console.log(`populateReferrerLinkinHTML - ${e}`);const r="0x0000000000000000000000000000000000000000";let t=e;if(isUserConnected()&&(t=await getReferrer(e)),t!==r){console.log("dev:Setting Referrer Field");const e=document.querySelector(".refer-referrer");e?e.value=t:console.error("dev:referrerField missing")}const n=document.querySelector("#add-referrer");n&&(t===r?n.classList.remove("hidden"):n.classList.add("hidden"))}async function getReferrer(e){let r={contractAddress:REFER_CONTRACT_ADDRESS_TESTNET,functionName:"getReferrer",abi:[{inputs:[{internalType:"address",name:"_user",type:"address"}],name:"getReferrer",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}],params:{_user:e}};return await Moralis.executeFunction(r)}async function populateUserReferralsCount(e){let r=e;isUserConnected()&&(r=await getReferralsCount(e));const t=document.querySelectorAll(".refer-total");t&&t.forEach((e=>{e.innerHTML=r}))}async function getReferralsCount(e){let r={contractAddress:REFER_CONTRACT_ADDRESS_TESTNET,functionName:"getReferralsCount",abi:[{inputs:[{internalType:"address",name:"_userReferralsCount",type:"address"}],name:"getReferralsCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],params:{_userReferralsCount:e}},t="";try{t=await Moralis.executeFunction(r)}catch(e){t="error-ln99-app",console.error(e)}return t}async function addReferrer(){const e=document.querySelector("#add-referrer-address"),r=document.querySelector("#buy-token-error-con"),t=document.querySelector("#buy-token-error-msg");if(console.log(e),console.log(e.value),!e||e.value)if(e&&e.value.length<=6)showErrMsg(r,t,"Invalid Address!");else{console.error("referrerAddress#add-referrer-address missing");try{let r=await setReferAddress(e.value);populateReferrerLinkinHTML(getUserWalletAddress()),console.log(r)}catch(e){console.error(e),showErrMsg(r,t,"Invalid Address!!!")}}else showErrMsg(r,t,"Empty Referrer Address Field!")}async function setReferAddress(e){console.log(`setReferAddress to - ${e}`);let r,t={contractAddress:REFER_CONTRACT_ADDRESS_TESTNET,functionName:"addReferAddress",abi:[{inputs:[{internalType:"address",name:"referAddress",type:"address"}],name:"addReferAddress",outputs:[],stateMutability:"nonpayable",type:"function"}],params:{referAddress:e}};try{r=await Moralis.executeFunction(t)}catch(e){console.error(e)}return await r.wait()}async function populateUserReferralComissions(e){console.log(`Getting commission of: ${e}`);let r=e;isUserConnected()&&(r=await getTotalReferralCommissions(e)),r/=Math.pow(10,9);const t=document.querySelectorAll(".refer-earning");t&&t.forEach((e=>{console.log(`Setting commission to: ${r}`),e.innerHTML=`${r} IBAT`}))}async function getTotalReferralCommissions(e){let r={contractAddress:REFER_CONTRACT_ADDRESS_TESTNET,functionName:"getTotalReferralCommissions",abi:[{inputs:[{internalType:"address",name:"_userCommission",type:"address"}],name:"getTotalReferralCommissions",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],params:{_userCommission:e}};return await Moralis.executeFunction(r)}function copyReferLink(){let e=`https://presale.battleinfinity.io/?refercode=${getUserWalletAddress()}`;populateReferralLinkinHTML(e),navigator.clipboard.writeText(e)}function populateReferralLinkinHTML(e){const r=document.querySelectorAll(".refer-link-text");r&&r.forEach((r=>{r.innerHTML=e,r.value=e}))}copyReferLinkBtns.forEach((e=>e.onclick=copyReferLink));
//# sourceMappingURL=index.f68fa280.js.map
