{"mappings":"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","sources":["src/js/app.js"],"sourcesContent":["// import WalletConnect from \"@walletconnect/client\";\r\nconst loader = document.getElementById('loader');\r\nconst navItems = document.querySelectorAll('.nav-section');\r\nfunction navigateTo(el) {\r\n    // this makes the swap modal visible again - in case someone clicked on settings & then changed windows (THIS BEHAVIOUR APPLIES TO ALL MODALS)\r\n    // LEFT FOR NOW - but to implement - I need to disable the checked state to make sure the settings modal hides \r\n    // if (el === 'swap') {\r\n    //     hideSwap('#swap');\r\n    // }\r\n    const itemToShow = document.getElementById(el);\r\n    navItems.forEach(item => {\r\n        if (!item.classList.contains('hidden')) item.classList.add('hidden');\r\n    });\r\n    loader.classList.remove('hidden')\r\n\r\n    setTimeout(() => {\r\n        loader.classList.add('hidden');\r\n    }, 500);\r\n\r\n    itemToShow.classList.add('z-20');\r\n    itemToShow.classList.remove('hidden');\r\n}\r\n\r\nfunction hideSwap(elId, hide) {\r\n    const el = document.querySelector(elId);\r\n    el.style.visibility = hide ? 'hidden' : 'visible';\r\n}\r\n\r\n\r\n\r\n\r\n/**\r\n * *******************************    dapp.html : Additional Functionality    *******************************\r\n */\r\n// const copyReferLinkBtn = document.getElementById(\"refer-link-icon\");\r\nconst copyReferLinkBtns = document.querySelectorAll(\".refer-link\");\r\n// async function populateReferrerOf(userAddress) {\r\nasync function populateReferrerLinkinHTML(userAddress) {\r\n    let referrerValue = userAddress; //which will be 'logged out' if user is logged out\r\n    // if user is logged-in we change the value of refferValue\r\n    if (isUserConnected()) referrerValue = await getReferrer(userAddress);\r\n    const referrerFields = document.querySelectorAll('.refer-referrer');\r\n    referrerFields.forEach(el => {\r\n        // in this example - the userAddress = logged out\r\n        el.innerHTML = referrerValue;\r\n    });\r\n\r\n}\r\n\r\n\r\nasync function getReferrer(userAddress) {\r\n    const ABI_getReferrer = [{ \"inputs\": [{ \"internalType\": \"address\", \"name\": \"_user\", \"type\": \"address\" }], \"name\": \"getReferrer\", \"outputs\": [{ \"internalType\": \"address\", \"name\": \"\", \"type\": \"address\" }], \"stateMutability\": \"view\", \"type\": \"function\" }];\r\n    let options = {\r\n        contractAddress: REFER_CONTRACT_ADDRESS_TESTNET,\r\n        functionName: 'getReferrer',\r\n        abi: ABI_getReferrer,\r\n        params: {\r\n            _user: userAddress,\r\n        }\r\n    }\r\n    return await Moralis.executeFunction(options);\r\n}\r\n\r\nasync function populateUserReferralsCount(userAddress) {\r\n    let countValue = userAddress; //which will be 'logged out' if user is logged out\r\n    // if user is logged-in we change the value of refferValue\r\n    if (isUserConnected()) countValue = await getReferralsCount(userAddress);\r\n    const referrerFields = document.querySelectorAll('.refer-total');\r\n    referrerFields.forEach(el => {\r\n        // in this example - the countValue = 0\r\n        el.innerHTML = countValue;\r\n    });\r\n}\r\n\r\nasync function getReferralsCount(userAddress) {\r\n    console.log('blah 0');\r\n    const ABI_referralsCount = [{ \"inputs\": [{ \"internalType\": \"address\", \"name\": \"\", \"type\": \"address\" }], \"name\": \"referralsCount\", \"outputs\": [{ \"internalType\": \"uint256\", \"name\": \"\", \"type\": \"uint256\" }], \"stateMutability\": \"view\", \"type\": \"function\" }];\r\n\r\n    let options = {\r\n        contractAddress: REFER_CONTRACT_ADDRESS_TESTNET,\r\n        functionName: 'referralsCount',\r\n        abi: ABI_referralsCount,\r\n        params: {\r\n            address: userAddress,\r\n        }\r\n    }\r\n    console.log('blah 1');\r\n    let r = await Moralis.executeFunction(options);\r\n    console.log('blah 2');\r\n    return userAddress\r\n}\r\n\r\n\r\n\r\nasync function populateUserReferralComissions(userAddress) {\r\n    let commissionValue = userAddress; //which will be 'logged out' if user is logged out\r\n    // if user is logged-in we change the value of refferValue\r\n    if (isUserConnected()) commissionValue = await getTotalReferralCommissions(userAddress);\r\n    const commssionFields = document.querySelectorAll('.refer-earning');\r\n    commssionFields.forEach(el => {\r\n        // in this example - the countValue = 0\r\n        el.innerHTML = commissionValue;\r\n    });\r\n}\r\n\r\nasync function getTotalReferralCommissions(userAddress) {\r\n    const ABI_totalReferralCommissions = [{ \"inputs\": [{ \"internalType\": \"address\", \"name\": \"\", \"type\": \"address\" }], \"name\": \"totalReferralCommissions\", \"outputs\": [{ \"internalType\": \"uint256\", \"name\": \"\", \"type\": \"uint256\" }], \"stateMutability\": \"view\", \"type\": \"function\" }];\r\n    let options = {\r\n        contractAddress: REFER_CONTRACT_ADDRESS_TESTNET,\r\n        functionName: 'totalReferralCommissions',\r\n        abi: ABI_totalReferralCommissions,\r\n        params: {\r\n            _user: userAddress,\r\n        }\r\n    }\r\n    return await Moralis.executeFunction(options);\r\n}\r\n\r\nfunction copyReferLink() {\r\n    // get the referralLink\r\n    /**\r\n        if user logged in - show the box \r\n        else nothing OR hide the box at logout\r\n    * \r\n    */\r\n    let userAddress = getUserWalletAddress();\r\n    // store it in variable\r\n    let USER_RefferalLink = `url/${userAddress}`;\r\n    populateReferralLinkinHTML(USER_RefferalLink);\r\n\r\n    navigator.clipboard.writeText(USER_RefferalLink);\r\n\r\n    // console.log(`copied`);\r\n    // populateReferralLinkinHTML('bkahs.gffggffgfggfgffgghjjhjhhjhjhjhjhjjhhhjhjhhjhjhjhhhhhhhhhhhhhhhhhhhhhs');\r\n}\r\nfunction populateReferralLinkinHTML(referralLink) {\r\n    const linkNodes = document.querySelectorAll('.refer-link-text');\r\n    linkNodes.forEach(el => {\r\n        el.innerHTML = referralLink;\r\n    });\r\n}\r\n// copyReferLinkBtn.onclick = copyReferLink;\r\ncopyReferLinkBtns.forEach(el => (el.onclick = copyReferLink))\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * *******************************    WEB3    *******************************\r\n */\r\n// Connecting with Metamask Wallet\r\nconst serverUrl = \"https://cbdyvlhyonhj.usemoralis.com:2053/server\";\r\nconst appId = \"PC04t9NTMGlWn2p5EGf8ukAZbNaZbA1PWrv7IlaC\";\r\nconst CONTRACT_ADDRESS_TESTNET = '0xf8992AE362561427602A50aff0f84085d1fd88f7';\r\nconst REFER_CONTRACT_ADDRESS_TESTNET = '0xD5B4C3eeB1979c179F598E11620Fd2D817E636C3';\r\nconst referABI = [{ \"inputs\": [{ \"internalType\": \"address\", \"name\": \"_user\", \"type\": \"address\" }], \"name\": \"getReferrer\", \"outputs\": [{ \"internalType\": \"address\", \"name\": \"\", \"type\": \"address\" }], \"stateMutability\": \"view\", \"type\": \"function\" }, { \"inputs\": [{ \"internalType\": \"address\", \"name\": \"\", \"type\": \"address\" }], \"name\": \"referralsCount\", \"outputs\": [{ \"internalType\": \"uint256\", \"name\": \"\", \"type\": \"uint256\" }], \"stateMutability\": \"view\", \"type\": \"function\" }, { \"inputs\": [{ \"internalType\": \"address\", \"name\": \"\", \"type\": \"address\" }], \"name\": \"totalReferralCommissions\", \"outputs\": [{ \"internalType\": \"uint256\", \"name\": \"\", \"type\": \"uint256\" }], \"stateMutability\": \"view\", \"type\": \"function\" }]\r\nconst referOptions = {\r\n    contractAddress: REFER_CONTRACT_ADDRESS_TESTNET,\r\n    abi: referABI,\r\n};\r\n\r\nlet currentChainIdHex; //default chain set to ETH\r\ntry {\r\n    Moralis.start({ serverUrl, appId });\r\n} catch (error) {\r\n    console.log(error);\r\n}\r\n\r\nconst walletOptions = document.getElementById(\"wallet-options\");\r\nconst loginBtn = document.getElementById(\"web3-login-mm\");\r\nconst logoutBtn = document.getElementById(\"web3-logout\");\r\nconst showTokenBtn = document.getElementById(\"web3-tokens\");\r\n\r\nconst showAddress = document.getElementById(\"web3-wallet-address\");\r\n\r\nlet web3 = new Web3(Web3.givenProvider || \"ws://localhost:8545\");\r\n\r\nasync function login(provider) {\r\n    // const BscChainId = \"0x38\"; //Bsc Mainnet ID\r\n    const BscChainId = \"0x61\"; //Bsc Testnet ID\r\n\r\n    // console.log(`Provider : ${provider}`);\r\n\r\n    let user = Moralis.User.current();\r\n    if (!user) {\r\n        // console.log(`Provider : ${provider} : ${provider === 'walletconnect'}`);\r\n        if (provider === 'walletconnect') {\r\n            user = await Moralis.Web3.authenticate({ provider: \"walletconnect\" });\r\n        } else {\r\n            user = await Moralis.Web3.authenticate();\r\n        }\r\n        currentChainIdHex = await Moralis.switchNetwork(BscChainId);\r\n    }\r\n    currentChainIdHex = await Moralis.getChainId();\r\n    await Moralis.enableWeb3();\r\n\r\n    atLogin()\r\n    // moved the below two lines inside atLogin()\r\n    // // toggles the visibility of connect & disconnect button\r\n    // toggleBtnVisibility(true);\r\n\r\n    showAddress.dataset.tip = user.get(\"ethAddress\");\r\n    getBalance(currentChainIdHex, user.get(\"ethAddress\"));\r\n\r\n    // Below address is on both BSC & ETH Scan - \r\n    // getBalance('0x1', '0x66A2C7B0d4Da7E699f6dD27f89b49AB15b0A51e8'); // eth chain\r\n    // getBalance('0x38', '0x66A2C7B0d4Da7E699f6dD27f89b49AB15b0A51e8'); // bsc chain - this account has BUSD in it\r\n}\r\n\r\nfunction getUserWalletAddress() {\r\n    let err = 'Logged Out';\r\n    if (!isUserConnected())\r\n        return err;\r\n\r\n    return Moralis.User.current().get(\"ethAddress\");\r\n\r\n}\r\nfunction isUserConnected() {\r\n    let user = Moralis.User.current();\r\n    return user ? true : false;\r\n}\r\n\r\nasync function logOut() {\r\n    await Moralis.User.logOut();\r\n    // console.log(\"logged out\");\r\n    // toggleBtnVisibility(false);\r\n    // showAddress.dataset.tip = 'Wallet not connected';\r\n    atLogout()\r\n}\r\nfunction atLogout() {\r\n    /**\r\n     * 1. hide referral box\r\n     */\r\n    populateReferralLinkinHTML('Logged Out');\r\n    populateReferrerLinkinHTML('Logged Out')\r\n    populateUserReferralComissions('0');\r\n    populateUserReferralsCount(0);\r\n    toggleBtnVisibility(false);\r\n    showAddress.dataset.tip = 'Wallet not connected';\r\n}\r\nfunction atLogin() {\r\n    /**\r\n    * 1. show referral box - toggle visibility of it\r\n    */\r\n    let userAddress = getUserWalletAddress();\r\n    let USER_RefferalLink = `url/${userAddress}`;\r\n    populateReferralLinkinHTML(USER_RefferalLink);\r\n    populateReferrerLinkinHTML(userAddress);\r\n    populateUserReferralComissions(userAddress);\r\n    populateUserReferralsCount(userAddress);\r\n\r\n\r\n    // toggles the visibility of connect & disconnect button\r\n    toggleBtnVisibility(true);\r\n}\r\n\r\nasync function getBalance(chainId, address) {\r\n    const tokenList = document.getElementById('token-list');\r\n    currentChainIdHex = await Moralis.getChainId();\r\n    let currentUser = Moralis.User.current();\r\n    let currentUserAddress = currentUser.get(\"ethAddress\");\r\n    const options = { chain: chainId || currentChainIdHex || '0x38', address: address || currentUserAddress || \"0x9d51fd1a308c073f2f06a7181ad90c6d6ab5e9d7\" };\r\n    // console.log(`getBalance called with \\n chaidId ${options.chain} and \\n of address: ${options.address}`);\r\n    // const options = { chain: 'eth', address: \"0x9d51fd1a308c073f2f06a7181ad90c6d6ab5e9d7\" } // test address from Etherscan\r\n    // const options = { chain: 'bsc', address: \"0x60913d3fE722bFE425247D7673D8bdbDA56D1e02\" } // test address from BSC (bscscan)\r\n\r\n    const nativeBal = await Moralis.Web3API.account.getNativeBalance(options);\r\n\r\n    // console.log(`log 2 : ${currentChainIdHex}`);\r\n    // console.log(`log 3 : ${HEX_TO_CHAIN_DETAILS[currentChainIdHex].nativeToken}`);\r\n    tokenList.innerHTML = `<li class=\"pr-2 flex justify-between w-full md:w-1/2 mx-auto mt-2\"><span class=\"w-1/2 text-center\">${HEX_TO_CHAIN_DETAILS[currentChainIdHex].nativeToken}</span><span class=\"w-1/2 text-left\">${web3.utils.fromWei(nativeBal.balance)}</span></li>`\r\n\r\n    const balances = await Moralis.Web3API.account.getTokenBalances(options);\r\n    // console.log(`log 4--`);\r\n    // console.log(balances);\r\n    // console.log(`--log 4`);\r\n    // console.log(`log 5--`);\r\n    // console.log(options);\r\n    // console.log(`--log 5`);\r\n    if (balances.length) {\r\n        balances.forEach(token => {\r\n            // console.log(`not - ${token.symbol}`);\r\n            if (token.symbol == 'USDC' || token.symbol == 'BUSD' || token.symbol == 'IBAT') {\r\n                const balance = convertTokenBalance(token.balance, token.decimals);\r\n                // const tokenFromWei = web3.utils.fromWei(token.balance)\r\n                tokenList.innerHTML += `<li class=\"pr-2 flex justify-between w-full md:w-1/2 mx-auto\"><span class=\"w-1/2 text-center\">${token.symbol}</span><span class=\"w-1/2 text-left\">${balance}</span></li>`\r\n            }\r\n        });\r\n    } else {\r\n        tokenList.innerHTML += `<li class=\"w-full text-center mx-auto text-xs opacity-80 mt-2\">no other tokens available</li>`\r\n    }\r\n}\r\n\r\n\r\nfunction toggleBtnVisibility(connected) {\r\n    const allBtns = document.querySelectorAll('.wallet-options-btn ');\r\n    if (connected) { //show\r\n        // loginBtn.classList.add('hidden');\r\n        allBtns.forEach(btn => {\r\n            btn.classList.add('hidden');\r\n        });\r\n        // walletOptions.classList.add('hidden');\r\n        logoutBtn.classList.remove('hidden');\r\n        showTokenBtn.classList.remove('hidden');\r\n    }\r\n    else {\r\n        // loginBtn.classList.remove('hidden');\r\n        // walletOptions.classList.remove('hidden');\r\n        allBtns.forEach(btn => {\r\n            btn.classList.remove('hidden');\r\n        });\r\n        logoutBtn.classList.add('hidden');\r\n        showTokenBtn.classList.add('hidden');\r\n    }\r\n}\r\n\r\n\r\nfunction convertTokenBalance(balance, decimals) {\r\n    let newBalance = balance == 0 ? 0 : balance / Math.pow(10, decimals);\r\n    newBalance = newBalance < 0.001 ? 0 : newBalance;\r\n    return newBalance;\r\n}\r\n\r\nasync function isPresaleOpen() {\r\n    await Moralis.enableWeb3();\r\n    const ABI = [{ \"inputs\": [], \"name\": \"isPresaleOpen\", \"outputs\": [{ \"internalType\": \"bool\", \"name\": \"\", \"type\": \"bool\" }], \"stateMutability\": \"view\", \"type\": \"function\" }];\r\n    const result = await readFunction('isPresaleOpen', ABI);\r\n    // console.log(`isPresaleOpen = ${result}`);\r\n}\r\n\r\n// isPresaleOpen();\r\n\r\nasync function readFunction(functionName, ABI) {\r\n    // let options = {\r\n    //     contractAddress: '0x356d2E7a0d592bAd95E86d19479c37cfdBb68Ab9',\r\n    //     functionName: 'isPresaleOpen',\r\n    //     abi: [{ \"inputs\": [], \"name\": \"isPresaleOpen\", \"outputs\": [{ \"internalType\": \"bool\", \"name\": \"\", \"type\": \"bool\" }], \"stateMutability\": \"view\", \"type\": \"function\" }],\r\n    //     Params: {\r\n    //         Note: 'Thanks for your work'\r\n    //     },\r\n    //     msgValue: Moralis.Units.ETH(0.1)\r\n    // }\r\n    let options = {\r\n        contractAddress: CONTRACT_ADDRESS_TESTNET,\r\n        functionName: functionName,\r\n        abi: ABI,\r\n    }\r\n    return await Moralis.executeFunction(options);\r\n}\r\n\r\nfunction getBuyAmount() {\r\n    // @todo: validate input\r\n    let buyAmount = 0;\r\n    const buyAmounts = document.querySelectorAll('.buy-amount');\r\n    // console.log(buyAmounts.length);\r\n\r\n    // const buyAmountMob = document.getElementById(\"buy-amount-mobile\");\r\n    // const buyAmountDesktop = document.getElementById(\"buy-amount-desktop\");\r\n    // if (buyAmountMob.classList.contains(hidden))\r\n    buyAmounts.forEach(el => {\r\n        if (el.value) {\r\n            // console.log(`${el.value}`);\r\n            buyAmount = +el.value;\r\n        }\r\n    });\r\n    // console.log(+buyAmount);\r\n    return buyAmount;\r\n}\r\nasync function buyToken() {\r\n    // console.log('Ran buyToken()');\r\n    let value = getBuyAmount();\r\n    // console.log(value);\r\n\r\n    await Moralis.enableWeb3();\r\n    if (!isUserConnected()) {\r\n        console.log('User not Logged in - connect wallet');\r\n        return;\r\n    }\r\n\r\n\r\n    const FUNCTION_NAME = 'buyToken';\r\n    const ABI = [{ \"inputs\": [], \"name\": \"buyToken\", \"outputs\": [{ \"internalType\": \"address\", \"name\": \"\", \"type\": \"address\" }], \"stateMutability\": \"payable\", \"type\": \"function\" }];\r\n    let options = {\r\n        contractAddress: CONTRACT_ADDRESS_TESTNET,\r\n        functionName: FUNCTION_NAME,\r\n        abi: ABI,\r\n        msgValue: Moralis.Units.ETH(value)\r\n    }\r\n    let result;\r\n    try {\r\n        result = await Moralis.executeFunction(options);\r\n        // console.log(`Result \\n${result}`);\r\n    } catch (error) {\r\n        const errMsg = document.getElementById('buy-token-error-msg');\r\n        errMsg.innerHTML = error.data.message;\r\n        toggleErrMsg();\r\n    }\r\n}\r\nfunction toggleErrMsg() {\r\n    const errMsg = document.getElementById('buy-token-error-input');\r\n    errMsg.checked = !errMsg.checked;\r\n}\r\n\r\n\r\nloginBtn.onclick = login;\r\nlogoutBtn.onclick = logOut;\r\n// showTokenBtn.onclick = getBalance;\r\n\r\nconst HEX_TO_CHAIN_DETAILS = {\r\n    '0x1': {\r\n        chain: 'ETH',\r\n        nativeToken: 'ETH'\r\n    },\r\n    '0x61': {\r\n        // BSC testnet\r\n        chain: 'BSC',\r\n        nativeToken: 'BNB'\r\n    }\r\n    ,\r\n    '0x38': {\r\n        // BSC mainnet\r\n        chain: 'BSC',\r\n        nativeToken: 'BNB'\r\n    }\r\n}\r\n\r\n"],"names":["loader","document","getElementById","navItems","querySelectorAll","navigateTo","el","itemToShow","forEach","item","classList","contains","add","remove","setTimeout","hideSwap","elId","hide","querySelector","style","visibility","populateReferrerLinkinHTML","userAddress","referrerValue","isUserConnected","getReferrer","innerHTML","options","contractAddress","REFER_CONTRACT_ADDRESS_TESTNET","functionName","internalType","name","type","stateMutability","params","_user","Moralis","executeFunction","populateUserReferralsCount","countValue","getReferralsCount","log","address","console","populateUserReferralComissions","commissionValue","getTotalReferralCommissions","copyReferLink","getUserWalletAddress","populateReferralLinkinHTML","USER_RefferalLink","navigator","clipboard","writeText","referralLink","copyReferLinkBtns","onclick","inputs","outputs","abi","referABI","currentChainIdHex","start","serverUrl","appId","error","walletOptions","loginBtn","logoutBtn","showTokenBtn","Web3","givenProvider","login","provider","user","User","current","authenticate","switchNetwork","getChainId","enableWeb3","atLogin","showAddress","dataset","tip","get","getBalance","logOut","atLogout","toggleBtnVisibility","chainId","tokenList","currentUserAddress","chain","nativeBal","Web3API","account","getNativeBalance","HEX_TO_CHAIN_DETAILS","nativeToken","web3","utils","fromWei","balance","getTokenBalances","balances","length","token","symbol","convertTokenBalance","decimals","connected","allBtns","btn","Math","pow","newBalance","isPresaleOpen","readFunction","ABI","CONTRACT_ADDRESS_TESTNET","getBuyAmount","buyAmount","value","buyToken","result","Units","ETH","error1","data","message","toggleErrMsg","errMsg","checked"],"version":3,"file":"dapp.c6fe3447.js.map"}